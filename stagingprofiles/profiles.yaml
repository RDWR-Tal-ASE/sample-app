apiVersion: waas.radware.com/v1beta1
kind: Profile
metadata:
  name:  waas-api-profile
  namespace: kwaf
  labels:
    release: waas
spec:
  policies:
  - classifiers:
    system_key.go:147: cannot determine seccomp compiler version in generateSystemKey: 
    -----
    runtime/cgo: pthread_create failed: Resource temporarily unavailable
    runtime/cgo: pthread_create failed: Resource temporarily unavailable
    SIGABRT: abort
    PC=0x7fe0221a5f47 m=3 sigcode=18446744073709551610
    
    goroutine 0 [idle]:
    runtime: unknown pc 0x7fe0221a5f47
    stack: frame={sp:0x7fe01f753840, fp:0x0} stack=[0x7fe01ef54288,0x7fe01f753e88)
    00007fe01f753740:  00007fe01f753b20  00007fe022786f13 
    00007fe01f753750:  0000000000000005  00000000008661c8 
    00007fe01f753760:  00007fe01f753c50  00000000027d63f0 
    00007fe01f753770:  0000000000000000  0000000000593e90 
    00007fe01f753780:  0000000000000000  00007fe022786f13 
    00007fe01f753790:  0000000000000005  0000000000000000 
    00007fe01f7537a0:  2525252525252525  2525252525252525 
    00007fe01f7537b0:  00000000ff00ff00  0000000000000000 
    00007fe01f7537c0:  00000000ff000000  0000000000000000 
    00007fe01f7537d0:  00007fe010000010  00007fe010000010 
    00007fe01f7537e0:  000000000000000e  000000000000000e 
    00007fe01f7537f0:  0000000000000000  0000000000000000 
    00007fe01f753800:  ffffffffffffffff  ffffffffffffffff 
    00007fe01f753810:  0000000400000004  0000000400000004 
    00007fe01f753820:  6c6c616d00732520  656c69616620636f 
    00007fe01f753830:  0000000000000000  0000000000000000 
    00007fe01f753840: <0000000000000000  0000000000000000 
    00007fe01f753850:  0000000000000000  0000000000000000 
    00007fe01f753860:  0000000000000000  0000000000000000 
    00007fe01f753870:  0000000000000000  0000000000000000 
    00007fe01f753880:  0000000000000000  0000000000000000 
    00007fe01f753890:  0000000000000000  0000000000000000 
    00007fe01f7538a0:  0000000000000000  0000000000000000 
    00007fe01f7538b0:  00007fe022553560  00007fe022556bc0 
    00007fe01f7538c0:  fffffffe7fffffff  ffffffffffffffff 
    00007fe01f7538d0:  ffffffffffffffff  ffffffffffffffff 
    00007fe01f7538e0:  ffffffffffffffff  ffffffffffffffff 
    00007fe01f7538f0:  ffffffffffffffff  ffffffffffffffff 
    00007fe01f753900:  ffffffffffffffff  ffffffffffffffff 
    00007fe01f753910:  ffffffffffffffff  ffffffffffffffff 
    00007fe01f753920:  ffffffffffffffff  ffffffffffffffff 
    00007fe01f753930:  ffffffffffffffff  ffffffffffffffff 
    runtime: unknown pc 0x7fe0221a5f47
    stack: frame={sp:0x7fe01f753840, fp:0x0} stack=[0x7fe01ef54288,0x7fe01f753e88)
    00007fe01f753740:  00007fe01f753b20  00007fe022786f13 
    00007fe01f753750:  0000000000000005  00000000008661c8 
    00007fe01f753760:  00007fe01f753c50  00000000027d63f0 
    00007fe01f753770:  0000000000000000  0000000000593e90 
    00007fe01f753780:  0000000000000000  00007fe022786f13 
    00007fe01f753790:  0000000000000005  0000000000000000 
    00007fe01f7537a0:  2525252525252525  2525252525252525 
    00007fe01f7537b0:  00000000ff00ff00  0000000000000000 
    00007fe01f7537c0:  00000000ff000000  0000000000000000 
    00007fe01f7537d0:  00007fe010000010  00007fe010000010 
    00007fe01f7537e0:  000000000000000e  000000000000000e 
    00007fe01f7537f0:  0000000000000000  0000000000000000 
    00007fe01f753800:  ffffffffffffffff  ffffffffffffffff 
    00007fe01f753810:  0000000400000004  0000000400000004 
    00007fe01f753820:  6c6c616d00732520  656c69616620636f 
    00007fe01f753830:  0000000000000000  0000000000000000 
    00007fe01f753840: <0000000000000000  0000000000000000 
    00007fe01f753850:  0000000000000000  0000000000000000 
    00007fe01f753860:  0000000000000000  0000000000000000 
    00007fe01f753870:  0000000000000000  0000000000000000 
    00007fe01f753880:  0000000000000000  0000000000000000 
    00007fe01f753890:  0000000000000000  0000000000000000 
    00007fe01f7538a0:  0000000000000000  0000000000000000 
    00007fe01f7538b0:  00007fe022553560  00007fe022556bc0 
    00007fe01f7538c0:  fffffffe7fffffff  ffffffffffffffff 
    00007fe01f7538d0:  ffffffffffffffff  ffffffffffffffff 
    00007fe01f7538e0:  ffffffffffffffff  ffffffffffffffff 
    00007fe01f7538f0:  ffffffffffffffff  ffffffffffffffff 
    00007fe01f753900:  ffffffffffffffff  ffffffffffffffff 
    00007fe01f753910:  ffffffffffffffff  ffffffffffffffff 
    00007fe01f753920:  ffffffffffffffff  ffffffffffffffff 
    00007fe01f753930:  ffffffffffffffff  ffffffffffffffff 
    
    goroutine 1 [running, locked to thread]:
    	goroutine running on other thread; stack unavailable
    
    rax    0x0
    rbx    0x7fe022553840
    rcx    0x7fe0221a5f47
    rdx    0x0
    rdi    0x2
    rsi    0x7fe01f753840
    rbp    0x59f2ca
    rsp    0x7fe01f753840
    r8     0x0
    r9     0x7fe01f753840
    r10    0x8
    r11    0x246
    r12    0x27d63f0
    r13    0x0
    r14    0x593e90
    r15    0x0
    rip    0x7fe0221a5f47
    rflags 0x246
    cs     0x33
    fs     0x0
    gs     0x0
    -----
    internal error, please report: running "yq" failed: timeout waiting for snap system profiles to get updated
    name: apiPolicy
    operatorEmail: support@radware.com
    protections:
    system_key.go:147: cannot determine seccomp compiler version in generateSystemKey: fork/exec /snap/snapd/15534/usr/lib/snapd/snap-seccomp: resource temporarily unavailable
    The connection to the server 10.100.0.139:6443 was refused - did you specify the right host or port?
    runtime/cgo: pthread_create failed: Resource temporarily unavailable
    SIGABRT: abort
    PC=0x7fac17d78f47 m=9 sigcode=18446744073709551610
    
    goroutine 0 [idle]:
    runtime: unknown pc 0x7fac17d78f47
    stack: frame={sp:0x7fac067fb830, fp:0x0} stack=[0x7fac05ffc288,0x7fac067fbe88)
    00007fac067fb730:  00007fac067fbaf0  00007fac1836175a 
    00007fac067fb740:  000000000000000b  0000000000000000 
    00007fac067fb750:  00007fabfffff700  00005632eebe1148 
    00007fac067fb760:  00007fac067fbc40  00005632efb16540 
    00007fac067fb770:  0000000000000000  00005632ee0bdd10 
    00007fac067fb780:  0000000000000000  00007fac18359f13 
    00007fac067fb790:  0000000000000005  0000000000000000 
    00007fac067fb7a0:  2525252525252525  2525252525252525 
    00007fac067fb7b0:  00000000000000ff  0000000000000000 
    00007fac067fb7c0:  00000000000000ff  0000000000000000 
    00007fac067fb7d0:  000000000000ff00  0000000000000000 
    00007fac067fb7e0:  00005632ed9a449a <net.unixSocket+314>  00005632ee6bc300 
    00007fac067fb7f0:  0000000000000000  00005632ee6aecc0 
    00007fac067fb800:  000000c0001ca540  000000c0001ca550 
    00007fac067fb810:  00005632ed78d228 <runtime.goexit1+56>  00005632ee68c4d8 
    00007fac067fb820:  20636f6c6c616d00  203a64656c696166 
    00007fac067fb830: <0000000000000000  0000000000000000 
    00007fac067fb840:  000000c0003bb7c0  000000c000437290 
    00007fac067fb850:  0000000000000000  0000000000000000 
    00007fac067fb860:  0000000000000000  0000000000000000 
    00007fac067fb870:  0000000000000000  0000000000000000 
    00007fac067fb880:  0000000000000000  0000000000000000 
    00007fac067fb890:  0000000000000000  0000000000000000 
    00007fac067fb8a0:  0000000000000000  0000000000000000 
    00007fac067fb8b0:  fffffffe7fffffff  ffffffffffffffff 
    00007fac067fb8c0:  ffffffffffffffff  ffffffffffffffff 
    00007fac067fb8d0:  ffffffffffffffff  ffffffffffffffff 
    00007fac067fb8e0:  ffffffffffffffff  ffffffffffffffff 
    00007fac067fb8f0:  ffffffffffffffff  ffffffffffffffff 
    00007fac067fb900:  ffffffffffffffff  ffffffffffffffff 
    00007fac067fb910:  ffffffffffffffff  ffffffffffffffff 
    00007fac067fb920:  ffffffffffffffff  ffffffffffffffff 
    runtime: unknown pc 0x7fac17d78f47
    stack: frame={sp:0x7fac067fb830, fp:0x0} stack=[0x7fac05ffc288,0x7fac067fbe88)
    00007fac067fb730:  00007fac067fbaf0  00007fac1836175a 
    00007fac067fb740:  000000000000000b  0000000000000000 
    00007fac067fb750:  00007fabfffff700  00005632eebe1148 
    00007fac067fb760:  00007fac067fbc40  00005632efb16540 
    00007fac067fb770:  0000000000000000  00005632ee0bdd10 
    00007fac067fb780:  0000000000000000  00007fac18359f13 
    00007fac067fb790:  0000000000000005  0000000000000000 
    00007fac067fb7a0:  2525252525252525  2525252525252525 
    00007fac067fb7b0:  00000000000000ff  0000000000000000 
    00007fac067fb7c0:  00000000000000ff  0000000000000000 
    00007fac067fb7d0:  000000000000ff00  0000000000000000 
    00007fac067fb7e0:  00005632ed9a449a <net.unixSocket+314>  00005632ee6bc300 
    00007fac067fb7f0:  0000000000000000  00005632ee6aecc0 
    00007fac067fb800:  000000c0001ca540  000000c0001ca550 
    00007fac067fb810:  00005632ed78d228 <runtime.goexit1+56>  00005632ee68c4d8 
    00007fac067fb820:  20636f6c6c616d00  203a64656c696166 
    00007fac067fb830: <0000000000000000  0000000000000000 
    00007fac067fb840:  000000c0003bb7c0  000000c000437290 
    00007fac067fb850:  0000000000000000  0000000000000000 
    00007fac067fb860:  0000000000000000  0000000000000000 
    00007fac067fb870:  0000000000000000  0000000000000000 
    00007fac067fb880:  0000000000000000  0000000000000000 
    00007fac067fb890:  0000000000000000  0000000000000000 
    00007fac067fb8a0:  0000000000000000  0000000000000000 
    00007fac067fb8b0:  fffffffe7fffffff  ffffffffffffffff 
    00007fac067fb8c0:  ffffffffffffffff  ffffffffffffffff 
    00007fac067fb8d0:  ffffffffffffffff  ffffffffffffffff 
    00007fac067fb8e0:  ffffffffffffffff  ffffffffffffffff 
    00007fac067fb8f0:  ffffffffffffffff  ffffffffffffffff 
    00007fac067fb900:  ffffffffffffffff  ffffffffffffffff 
    00007fac067fb910:  ffffffffffffffff  ffffffffffffffff 
    00007fac067fb920:  ffffffffffffffff  ffffffffffffffff 
    
    goroutine 1 [select]:
    net/http.(*Transport).getConn(0xc0003bb7c0, 0xc0004aa600, 0x0, 0xc00042ee80, 0x4, 0xc00042c900, 0xc, 0x0, 0x0, 0x0, ...)
    	/usr/lib/go-1.13/src/net/http/transport.go:1239 +0x555
    net/http.(*Transport).roundTrip(0xc0003bb7c0, 0xc000473a00, 0xc00041d3a0, 0xc00023f190, 0x1005632ed7637ca)
    	/usr/lib/go-1.13/src/net/http/transport.go:522 +0x605
    net/http.(*Transport).RoundTrip(0xc0003bb7c0, 0xc000473a00, 0xc0003bb7c0, 0x0, 0x0)
    	/usr/lib/go-1.13/src/net/http/roundtrip.go:17 +0x37
    net/http.send(0xc000473a00, 0x5632ee6a55a0, 0xc0003bb7c0, 0x0, 0x0, 0x0, 0xc0004201d0, 0x0, 0x1, 0x0)
    	/usr/lib/go-1.13/src/net/http/client.go:250 +0x445
    net/http.(*Client).send(0xc0003c4db0, 0xc000473a00, 0x0, 0x0, 0x0, 0xc0004201d0, 0x0, 0x1, 0xc000000000)
    	/usr/lib/go-1.13/src/net/http/client.go:174 +0xfc
    net/http.(*Client).do(0xc0003c4db0, 0xc000473a00, 0x0, 0x0, 0x0)
    	/usr/lib/go-1.13/src/net/http/client.go:641 +0x3d0
    net/http.(*Client).Do(0xc0003c4db0, 0xc000473a00, 0x0, 0x0, 0x0)
    	/usr/lib/go-1.13/src/net/http/client.go:509 +0x37
    github.com/snapcore/snapd/client.(*Client).raw(0xc00037e1c0, 0x5632ee6bc340, 0xc000475500, 0x5632edf11ee7, 0x3, 0x5632edf1bd78, 0xf, 0x0, 0x0, 0x0, ...)
    	/build/snapd/parts/snapd-deb/build/client/client.go:270 +0x3de
    github.com/snapcore/snapd/client.(*Client).rawWithTimeout(0xc00037e1c0, 0x5632ee6bc340, 0xc000475500, 0x5632edf11ee7, 0x3, 0x5632edf1bd78, 0xf, 0x0, 0x0, 0x0, ...)
    	/build/snapd/parts/snapd-deb/build/client/client.go:291 +0x11b
    github.com/snapcore/snapd/client.(*Client).do(0xc00037e1c0, 0x5632edf11ee7, 0x3, 0x5632edf1bd78, 0xf, 0x0, 0x0, 0x0, 0x0, 0x5632ee56bf40, ...)
    	/build/snapd/parts/snapd-deb/build/client/client.go:387 +0x1f0
    github.com/snapcore/snapd/client.(*Client).doSyncWithOpts(0xc00037e1c0, 0x5632edf11ee7, 0x3, 0x5632edf1bd78, 0xf, 0x0, 0x0, 0x0, 0x0, 0x5632ee5079a0, ...)
    	/build/snapd/parts/snapd-deb/build/client/client.go:492 +0xf6
    github.com/snapcore/snapd/client.(*Client).SysInfo(0xc00037e1c0, 0x0, 0x5632ee6a3820, 0xc00041d150)
    	/build/snapd/parts/snapd-deb/build/client/client.go:727 +0xd4
    main.maybeWaitForSecurityProfileRegeneration(0xc00037e1c0, 0xc0003bb7c0, 0xd)
    	/build/snapd/parts/snapd-deb/build/cmd/snap/cmd_run.go:200 +0x1aa
    main.(*cmdRun).Execute(0xc00023feb8, 0xc000032190, 0x2, 0x3, 0x0, 0x0)
    	/build/snapd/parts/snapd-deb/build/cmd/snap/cmd_run.go:240 +0x172
    main.main()
    	/build/snapd/parts/snapd-deb/build/cmd/snap/main.go:482 +0x581
    
    goroutine 6 [syscall]:
    os/signal.signal_recv(0x0)
    	/usr/lib/go-1.13/src/runtime/sigqueue.go:147 +0x9e
    os/signal.loop()
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:23 +0x24
    created by os/signal.init.0
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:29 +0x43
    
    goroutine 162 [syscall]:
    net/http.(*Transport).dialConn(0xc0003bb7c0, 0x5632ee6bc340, 0xc000475500, 0x0, 0xc00042ee80, 0x4, 0xc00042c900, 0xc, 0x0, 0x0, ...)
    	/usr/lib/go-1.13/src/net/http/transport.go:1444 +0x147
    net/http.(*Transport).dialConnFor(0xc0003bb7c0, 0xc000437340)
    	/usr/lib/go-1.13/src/net/http/transport.go:1313 +0xde
    created by net/http.(*Transport).queueForDial
    	/usr/lib/go-1.13/src/net/http/transport.go:1282 +0x41f
    
    rax    0x0
    rbx    0x7fac18126840
    rcx    0x7fac17d78f47
    rdx    0x0
    rdi    0x2
    rsi    0x7fac067fb830
    rbp    0x5632ee0d7e7c
    rsp    0x7fac067fb830
    r8     0x0
    r9     0x7fac067fb830
    r10    0x8
    r11    0x246
    r12    0x5632efb16540
    r13    0x0
    r14    0x5632ee0bdd10
    r15    0x0
    rip    0x7fac17d78f47
    rflags 0x246
    cs     0x33
    fs     0x0
    gs     0x0
