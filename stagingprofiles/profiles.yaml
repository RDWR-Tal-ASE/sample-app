apiVersion: waas.radware.com/v1beta1
kind: Profile
metadata:
  name:  waas-api-profile
  namespace: kwaf
  labels:
    release: waas
spec:
  policies:
  - classifiers:
    runtime/cgo: pthread_create failed: Resource temporarily unavailable
    SIGABRT: abort
    PC=0x7efed6077f47 m=6 sigcode=18446744073709551610
    
    goroutine 0 [idle]:
    runtime: unknown pc 0x7efed6077f47
    stack: frame={sp:0x7efed1e22840, fp:0x0} stack=[0x7efed1623288,0x7efed1e22e88)
    00007efed1e22740:  00007efed1e22b20  00007efed6658f13 
    00007efed1e22750:  0000000000000005  0000564482310148 
    00007efed1e22760:  00007efed1e22c50  00005644838233f0 
    00007efed1e22770:  0000000000000000  00005644817ecd10 
    00007efed1e22780:  0000000000000000  00007efed6658f13 
    00007efed1e22790:  0000000000000005  0000000000000000 
    00007efed1e227a0:  2525252525252525  2525252525252525 
    00007efed1e227b0:  00000000000000ff  0000000000000000 
    00007efed1e227c0:  00000000000000ff  0000000000000000 
    00007efed1e227d0:  00007efec0000010  00007efec0000010 
    00007efed1e227e0:  000000000000000e  000000000000000e 
    00007efed1e227f0:  0000000000000000  0000000000000000 
    00007efed1e22800:  ffffffffffffffff  ffffffffffffffff 
    00007efed1e22810:  0000000400000004  0000000400000004 
    00007efed1e22820:  20636f6c6c616d00  203a64656c696166 
    00007efed1e22830:  0000000000000000  0000000000000000 
    00007efed1e22840: <0000000000000000  0000000000000000 
    00007efed1e22850:  0000000000000000  0000000000000000 
    00007efed1e22860:  0000000000000000  0000000000000000 
    00007efed1e22870:  0000000000000000  0000000000000000 
    00007efed1e22880:  0000000000000000  0000000000000000 
    00007efed1e22890:  0000000000000000  0000000000000000 
    00007efed1e228a0:  0000000000000000  0000000000000000 
    00007efed1e228b0:  00007efed6425560  00007efed6428bc0 
    00007efed1e228c0:  fffffffe7fffffff  ffffffffffffffff 
    00007efed1e228d0:  ffffffffffffffff  ffffffffffffffff 
    00007efed1e228e0:  ffffffffffffffff  ffffffffffffffff 
    00007efed1e228f0:  ffffffffffffffff  ffffffffffffffff 
    00007efed1e22900:  ffffffffffffffff  ffffffffffffffff 
    00007efed1e22910:  ffffffffffffffff  ffffffffffffffff 
    00007efed1e22920:  ffffffffffffffff  ffffffffffffffff 
    00007efed1e22930:  ffffffffffffffff  ffffffffffffffff 
    runtime: unknown pc 0x7efed6077f47
    stack: frame={sp:0x7efed1e22840, fp:0x0} stack=[0x7efed1623288,0x7efed1e22e88)
    00007efed1e22740:  00007efed1e22b20  00007efed6658f13 
    00007efed1e22750:  0000000000000005  0000564482310148 
    00007efed1e22760:  00007efed1e22c50  00005644838233f0 
    00007efed1e22770:  0000000000000000  00005644817ecd10 
    00007efed1e22780:  0000000000000000  00007efed6658f13 
    00007efed1e22790:  0000000000000005  0000000000000000 
    00007efed1e227a0:  2525252525252525  2525252525252525 
    00007efed1e227b0:  00000000000000ff  0000000000000000 
    00007efed1e227c0:  00000000000000ff  0000000000000000 
    00007efed1e227d0:  00007efec0000010  00007efec0000010 
    00007efed1e227e0:  000000000000000e  000000000000000e 
    00007efed1e227f0:  0000000000000000  0000000000000000 
    00007efed1e22800:  ffffffffffffffff  ffffffffffffffff 
    00007efed1e22810:  0000000400000004  0000000400000004 
    00007efed1e22820:  20636f6c6c616d00  203a64656c696166 
    00007efed1e22830:  0000000000000000  0000000000000000 
    00007efed1e22840: <0000000000000000  0000000000000000 
    00007efed1e22850:  0000000000000000  0000000000000000 
    00007efed1e22860:  0000000000000000  0000000000000000 
    00007efed1e22870:  0000000000000000  0000000000000000 
    00007efed1e22880:  0000000000000000  0000000000000000 
    00007efed1e22890:  0000000000000000  0000000000000000 
    00007efed1e228a0:  0000000000000000  0000000000000000 
    00007efed1e228b0:  00007efed6425560  00007efed6428bc0 
    00007efed1e228c0:  fffffffe7fffffff  ffffffffffffffff 
    00007efed1e228d0:  ffffffffffffffff  ffffffffffffffff 
    00007efed1e228e0:  ffffffffffffffff  ffffffffffffffff 
    00007efed1e228f0:  ffffffffffffffff  ffffffffffffffff 
    00007efed1e22900:  ffffffffffffffff  ffffffffffffffff 
    00007efed1e22910:  ffffffffffffffff  ffffffffffffffff 
    00007efed1e22920:  ffffffffffffffff  ffffffffffffffff 
    00007efed1e22930:  ffffffffffffffff  ffffffffffffffff 
    
    goroutine 1 [chan receive, locked to thread]:
    text/template/parse.(*lexer).nextItem(...)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:195
    text/template/parse.(*Tree).next(...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:64
    text/template/parse.(*Tree).nextNonSpace(0xc00010e500, 0x0, 0x0, 0x0, 0x0, 0x0)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:102 +0x14e
    text/template/parse.(*Tree).parse(0xc00010e500)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:281 +0x2f6
    text/template/parse.(*Tree).Parse(0xc00010e500, 0x56448169c440, 0x16c, 0x0, 0x0, 0x0, 0x0, 0xc0001b6720, 0xc000134350, 0x2, ...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:230 +0x249
    text/template/parse.Parse(0x5644816419b7, 0x4, 0x56448169c440, 0x16c, 0x0, 0x0, 0x0, 0x0, 0xc000134350, 0x2, ...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:55 +0x124
    text/template.(*Template).Parse(0xc00003d840, 0x56448169c440, 0x16c, 0x4, 0xc0000fb708, 0x56448232b760)
    	/usr/lib/go-1.13/src/text/template/template.go:200 +0x113
    github.com/snapcore/snapd/systemd.init()
    	/build/snapd/parts/snapd-deb/build/systemd/systemd.go:1281 +0x3ad
    
    goroutine 6 [syscall]:
    os/signal.signal_recv(0x0)
    	/usr/lib/go-1.13/src/runtime/sigqueue.go:147 +0x9e
    os/signal.loop()
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:23 +0x24
    created by os/signal.init.0
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:29 +0x43
    
    goroutine 7 [runnable]:
    text/template/parse.(*lexer).emit(...)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:157
    text/template/parse.lexLeftDelim(0xc00013c630, 0x564481dbb888)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:307 +0x1e0
    text/template/parse.(*lexer).run(0xc00013c630)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:230 +0x39
    created by text/template/parse.lex
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:223 +0x192
    
    rax    0x0
    rbx    0x7efed6425840
    rcx    0x7efed6077f47
    rdx    0x0
    rdi    0x2
    rsi    0x7efed1e22840
    rbp    0x564481806e7c
    rsp    0x7efed1e22840
    r8     0x0
    r9     0x7efed1e22840
    r10    0x8
    r11    0x246
    r12    0x5644838233f0
    r13    0x0
    r14    0x5644817ecd10
    r15    0x0
    rip    0x7efed6077f47
    rflags 0x246
    cs     0x33
    fs     0x0
    gs     0x0
    name: apiPolicy
    operatorEmail: support@radware.com
    protections:
    runtime: failed to create new OS thread (have 2 already; errno=11)
    runtime: may need to increase max user processes (ulimit -u)
    fatal error: newosproc
    
    runtime stack:
    runtime.throw(0x1acaa5a, 0x9)
    	/usr/local/go/src/runtime/panic.go:1116 +0x72
    runtime.newosproc(0xc000062000)
    	/usr/local/go/src/runtime/os_linux.go:161 +0x1c5
    runtime.newm1(0xc000062000)
    	/usr/local/go/src/runtime/proc.go:1837 +0xdd
    runtime.newm(0x1bb7d48, 0x0, 0xffffffffffffffff)
    	/usr/local/go/src/runtime/proc.go:1816 +0x9b
    runtime.main.func1()
    	/usr/local/go/src/runtime/proc.go:135 +0x3f
    runtime.systemstack(0x46c2f4)
    	/usr/local/go/src/runtime/asm_amd64.s:370 +0x66
    runtime.mstart()
    	/usr/local/go/src/runtime/proc.go:1116
    
    goroutine 1 [running]:
    runtime.systemstack_switch()
    	/usr/local/go/src/runtime/asm_amd64.s:330 fp=0xc00005e788 sp=0xc00005e780 pc=0x46c420
    runtime.main()
    	/usr/local/go/src/runtime/proc.go:134 +0x70 fp=0xc00005e7e0 sp=0xc00005e788 pc=0x439ab0
    runtime.goexit()
    	/usr/local/go/src/runtime/asm_amd64.s:1374 +0x1 fp=0xc00005e7e8 sp=0xc00005e7e0 pc=0x46e061
    runtime/cgo: pthread_create failed: Resource temporarily unavailable
    SIGABRT: abort
    PC=0x7fd205960f47 m=5 sigcode=18446744073709551610
    
    goroutine 0 [idle]:
    runtime: unknown pc 0x7fd205960f47
    stack: frame={sp:0x7fd201f0c830, fp:0x0} stack=[0x7fd20170d288,0x7fd201f0ce88)
    00007fd201f0c730:  00007fd201f0caf0  00007fd205f4975a 
    00007fd201f0c740:  000000000000000b  0000000000000000 
    00007fd201f0c750:  00007fd200f0b700  0000561496c1a148 
    00007fd201f0c760:  00007fd201f0cc40  00005614982103f0 
    00007fd201f0c770:  0000000000000000  00005614960f6d10 
    00007fd201f0c780:  0000000000000000  00007fd205f41f13 
    00007fd201f0c790:  0000000000000005  0000000000000000 
    00007fd201f0c7a0:  2525252525252525  2525252525252525 
    00007fd201f0c7b0:  00000000000000ff  0000000000000000 
    00007fd201f0c7c0:  00000000000000ff  0000000000000000 
    00007fd201f0c7d0:  0000000000000000  000000ffff000000 
    00007fd201f0c7e0:  000000000000000e  000000000000000e 
    00007fd201f0c7f0:  0000000000000000  0000000000000000 
    00007fd201f0c800:  ffffffffffffffff  ffffffffffffffff 
    00007fd201f0c810:  0000000400000004  0000000400000004 
    00007fd201f0c820:  20636f6c6c616d00  203a64656c696166 
    00007fd201f0c830: <0000000000000000  0000000000000000 
    00007fd201f0c840:  0000000000000000  0000000000000000 
    00007fd201f0c850:  0000000000000000  0000000000000000 
    00007fd201f0c860:  0000000000000000  0000000000000000 
    00007fd201f0c870:  0000000000000000  0000000000000000 
    00007fd201f0c880:  0000000000000000  0000000000000000 
    00007fd201f0c890:  0000000000000000  0000000000000000 
    00007fd201f0c8a0:  0000000000000000  0000000000000000 
    00007fd201f0c8b0:  fffffffe7fffffff  ffffffffffffffff 
    00007fd201f0c8c0:  ffffffffffffffff  ffffffffffffffff 
    00007fd201f0c8d0:  ffffffffffffffff  ffffffffffffffff 
    00007fd201f0c8e0:  ffffffffffffffff  ffffffffffffffff 
    00007fd201f0c8f0:  ffffffffffffffff  ffffffffffffffff 
    00007fd201f0c900:  ffffffffffffffff  ffffffffffffffff 
    00007fd201f0c910:  ffffffffffffffff  ffffffffffffffff 
    00007fd201f0c920:  ffffffffffffffff  ffffffffffffffff 
    runtime: unknown pc 0x7fd205960f47
    stack: frame={sp:0x7fd201f0c830, fp:0x0} stack=[0x7fd20170d288,0x7fd201f0ce88)
    00007fd201f0c730:  00007fd201f0caf0  00007fd205f4975a 
    00007fd201f0c740:  000000000000000b  0000000000000000 
    00007fd201f0c750:  00007fd200f0b700  0000561496c1a148 
    00007fd201f0c760:  00007fd201f0cc40  00005614982103f0 
    00007fd201f0c770:  0000000000000000  00005614960f6d10 
    00007fd201f0c780:  0000000000000000  00007fd205f41f13 
    00007fd201f0c790:  0000000000000005  0000000000000000 
    00007fd201f0c7a0:  2525252525252525  2525252525252525 
    00007fd201f0c7b0:  00000000000000ff  0000000000000000 
    00007fd201f0c7c0:  00000000000000ff  0000000000000000 
    00007fd201f0c7d0:  0000000000000000  000000ffff000000 
    00007fd201f0c7e0:  000000000000000e  000000000000000e 
    00007fd201f0c7f0:  0000000000000000  0000000000000000 
    00007fd201f0c800:  ffffffffffffffff  ffffffffffffffff 
    00007fd201f0c810:  0000000400000004  0000000400000004 
    00007fd201f0c820:  20636f6c6c616d00  203a64656c696166 
    00007fd201f0c830: <0000000000000000  0000000000000000 
    00007fd201f0c840:  0000000000000000  0000000000000000 
    00007fd201f0c850:  0000000000000000  0000000000000000 
    00007fd201f0c860:  0000000000000000  0000000000000000 
    00007fd201f0c870:  0000000000000000  0000000000000000 
    00007fd201f0c880:  0000000000000000  0000000000000000 
    00007fd201f0c890:  0000000000000000  0000000000000000 
    00007fd201f0c8a0:  0000000000000000  0000000000000000 
    00007fd201f0c8b0:  fffffffe7fffffff  ffffffffffffffff 
    00007fd201f0c8c0:  ffffffffffffffff  ffffffffffffffff 
    00007fd201f0c8d0:  ffffffffffffffff  ffffffffffffffff 
    00007fd201f0c8e0:  ffffffffffffffff  ffffffffffffffff 
    00007fd201f0c8f0:  ffffffffffffffff  ffffffffffffffff 
    00007fd201f0c900:  ffffffffffffffff  ffffffffffffffff 
    00007fd201f0c910:  ffffffffffffffff  ffffffffffffffff 
    00007fd201f0c920:  ffffffffffffffff  ffffffffffffffff 
    
    goroutine 1 [chan receive, locked to thread]:
    text/template/parse.(*lexer).nextItem(...)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:195
    text/template/parse.(*Tree).next(...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:64
    text/template/parse.(*Tree).nextNonSpace(0xc00011c500, 0x0, 0x0, 0x0, 0x0, 0x0)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:102 +0x14e
    text/template/parse.(*Tree).action(0xc00011c500, 0xa, 0x54)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:358 +0x45
    text/template/parse.(*Tree).textOrAction(0xc00011c500, 0xa, 0x54)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:345 +0x295
    text/template/parse.(*Tree).itemList(0xc00011c500, 0x561495f4b9eb, 0x4, 0xc0001ca480)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:327 +0xfb
    text/template/parse.(*Tree).parseControl(0xc00011c500, 0x561496c75000, 0x561495f4b9eb, 0x4, 0x0, 0x0, 0xc0001ca480, 0x0, 0x0)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:459 +0x102
    text/template/parse.(*Tree).withControl(0xc00011c500, 0x1f, 0x34)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:509 +0x4e
    text/template/parse.(*Tree).action(0xc00011c500, 0xa, 0x30)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:372 +0x55f
    text/template/parse.(*Tree).textOrAction(0xc00011c500, 0x1f, 0x34)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:345 +0x295
    text/template/parse.(*Tree).parse(0xc00011c500)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:291 +0x383
    text/template/parse.(*Tree).Parse(0xc00011c500, 0x561495fa6440, 0x16c, 0x0, 0x0, 0x0, 0x0, 0xc0001c4720, 0xc000142350, 0x2, ...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:230 +0x249
    text/template/parse.Parse(0x561495f4b9b7, 0x4, 0x561495fa6440, 0x16c, 0x0, 0x0, 0x0, 0x0, 0xc000142350, 0x2, ...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:55 +0x124
    text/template.(*Template).Parse(0xc00003d840, 0x561495fa6440, 0x16c, 0x4, 0xc0001095e8, 0x561496c35760)
    	/usr/lib/go-1.13/src/text/template/template.go:200 +0x113
    github.com/snapcore/snapd/systemd.init()
    	/build/snapd/parts/snapd-deb/build/systemd/systemd.go:1281 +0x3ad
    
    goroutine 6 [syscall]:
    os/signal.signal_recv(0x0)
    	/usr/lib/go-1.13/src/runtime/sigqueue.go:147 +0x9e
    os/signal.loop()
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:23 +0x24
    created by os/signal.init.0
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:29 +0x43
    
    goroutine 7 [runnable]:
    text/template/parse.(*lexer).emit(...)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:157
    text/template/parse.lexLeftDelim(0xc00014a630, 0x5614966c5888)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:307 +0x1e0
    text/template/parse.(*lexer).run(0xc00014a630)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:230 +0x39
    created by text/template/parse.lex
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:223 +0x192
    
    rax    0x0
    rbx    0x7fd205d0e840
    rcx    0x7fd205960f47
    rdx    0x0
    rdi    0x2
    rsi    0x7fd201f0c830
    rbp    0x561496110e7c
    rsp    0x7fd201f0c830
    r8     0x0
    r9     0x7fd201f0c830
    r10    0x8
    r11    0x246
    r12    0x5614982103f0
    r13    0x0
    r14    0x5614960f6d10
    r15    0x0
    rip    0x7fd205960f47
    rflags 0x246
    cs     0x33
    fs     0x0
    gs     0x0
