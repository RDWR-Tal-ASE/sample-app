apiVersion: waas.radware.com/v1beta1
kind: Profile
metadata:
  name:  waas-api-profile
  namespace: kwaf
  labels:
    release: waas
spec:
  policies:
  - classifiers:
    runtime/cgo: pthread_create failed: Resource temporarily unavailable
    SIGABRT: abort
    PC=0x7f6085176f47 m=4 sigcode=18446744073709551610
    
    goroutine 0 [idle]:
    runtime: unknown pc 0x7f6085176f47
    stack: frame={sp:0x7f6081f23830, fp:0x0} stack=[0x7f6081724288,0x7f6081f23e88)
    00007f6081f23730:  0000000000000000  0000000000000000 
    00007f6081f23740:  0000000000000000  0000000000000000 
    00007f6081f23750:  0000000000000000  000056521dd38148 
    00007f6081f23760:  00007f6081f23c40  000056521fa27540 
    00007f6081f23770:  0000000000000000  000056521d214d10 
    00007f6081f23780:  0000000000000000  00007f6085757f13 
    00007f6081f23790:  0000000000000005  0000000000000000 
    00007f6081f237a0:  2525252525252525  2525252525252525 
    00007f6081f237b0:  00000000000000ff  0000000000000000 
    00007f6081f237c0:  00000000000000ff  0000000000000000 
    00007f6081f237d0:  00007f6074000010  00007f6074000010 
    00007f6081f237e0:  000000000000000e  000000000000000e 
    00007f6081f237f0:  0000000000000000  0000000000000000 
    00007f6081f23800:  ffffffffffffffff  ffffffffffffffff 
    00007f6081f23810:  0000000400000004  0000000400000004 
    00007f6081f23820:  20636f6c6c616d00  203a64656c696166 
    00007f6081f23830: <0000000000000000  0000000000000000 
    00007f6081f23840:  0000000000000000  0000000000000000 
    00007f6081f23850:  0000000000000000  0000000000000000 
    00007f6081f23860:  0000000000000000  0000000000000000 
    00007f6081f23870:  0000000000000000  0000000000000000 
    00007f6081f23880:  0000000000000000  0000000000000000 
    00007f6081f23890:  0000000000000000  0000000000000000 
    00007f6081f238a0:  0000000000000000  0000000000000000 
    00007f6081f238b0:  fffffffe7fffffff  ffffffffffffffff 
    00007f6081f238c0:  ffffffffffffffff  ffffffffffffffff 
    00007f6081f238d0:  ffffffffffffffff  ffffffffffffffff 
    00007f6081f238e0:  ffffffffffffffff  ffffffffffffffff 
    00007f6081f238f0:  ffffffffffffffff  ffffffffffffffff 
    00007f6081f23900:  ffffffffffffffff  ffffffffffffffff 
    00007f6081f23910:  ffffffffffffffff  ffffffffffffffff 
    00007f6081f23920:  ffffffffffffffff  ffffffffffffffff 
    runtime: unknown pc 0x7f6085176f47
    stack: frame={sp:0x7f6081f23830, fp:0x0} stack=[0x7f6081724288,0x7f6081f23e88)
    00007f6081f23730:  0000000000000000  0000000000000000 
    00007f6081f23740:  0000000000000000  0000000000000000 
    00007f6081f23750:  0000000000000000  000056521dd38148 
    00007f6081f23760:  00007f6081f23c40  000056521fa27540 
    00007f6081f23770:  0000000000000000  000056521d214d10 
    00007f6081f23780:  0000000000000000  00007f6085757f13 
    00007f6081f23790:  0000000000000005  0000000000000000 
    00007f6081f237a0:  2525252525252525  2525252525252525 
    00007f6081f237b0:  00000000000000ff  0000000000000000 
    00007f6081f237c0:  00000000000000ff  0000000000000000 
    00007f6081f237d0:  00007f6074000010  00007f6074000010 
    00007f6081f237e0:  000000000000000e  000000000000000e 
    00007f6081f237f0:  0000000000000000  0000000000000000 
    00007f6081f23800:  ffffffffffffffff  ffffffffffffffff 
    00007f6081f23810:  0000000400000004  0000000400000004 
    00007f6081f23820:  20636f6c6c616d00  203a64656c696166 
    00007f6081f23830: <0000000000000000  0000000000000000 
    00007f6081f23840:  0000000000000000  0000000000000000 
    00007f6081f23850:  0000000000000000  0000000000000000 
    00007f6081f23860:  0000000000000000  0000000000000000 
    00007f6081f23870:  0000000000000000  0000000000000000 
    00007f6081f23880:  0000000000000000  0000000000000000 
    00007f6081f23890:  0000000000000000  0000000000000000 
    00007f6081f238a0:  0000000000000000  0000000000000000 
    00007f6081f238b0:  fffffffe7fffffff  ffffffffffffffff 
    00007f6081f238c0:  ffffffffffffffff  ffffffffffffffff 
    00007f6081f238d0:  ffffffffffffffff  ffffffffffffffff 
    00007f6081f238e0:  ffffffffffffffff  ffffffffffffffff 
    00007f6081f238f0:  ffffffffffffffff  ffffffffffffffff 
    00007f6081f23900:  ffffffffffffffff  ffffffffffffffff 
    00007f6081f23910:  ffffffffffffffff  ffffffffffffffff 
    00007f6081f23920:  ffffffffffffffff  ffffffffffffffff 
    
    goroutine 1 [chan receive, locked to thread]:
    text/template/parse.(*lexer).nextItem(...)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:195
    text/template/parse.(*Tree).peek(...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:95
    text/template/parse.(*Tree).parse(0xc00010e500)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:277 +0xbc6
    text/template/parse.(*Tree).Parse(0xc00010e500, 0x56521d0c4440, 0x16c, 0x0, 0x0, 0x0, 0x0, 0xc0001b6720, 0xc000134350, 0x2, ...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:230 +0x249
    text/template/parse.Parse(0x56521d0699b7, 0x4, 0x56521d0c4440, 0x16c, 0x0, 0x0, 0x0, 0x0, 0xc000134350, 0x2, ...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:55 +0x124
    text/template.(*Template).Parse(0xc00003d840, 0x56521d0c4440, 0x16c, 0x4, 0xc0000fb708, 0x56521dd53760)
    	/usr/lib/go-1.13/src/text/template/template.go:200 +0x113
    github.com/snapcore/snapd/systemd.init()
    	/build/snapd/parts/snapd-deb/build/systemd/systemd.go:1281 +0x3ad
    
    goroutine 6 [syscall]:
    os/signal.signal_recv(0x0)
    	/usr/lib/go-1.13/src/runtime/sigqueue.go:147 +0x9e
    os/signal.loop()
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:23 +0x24
    created by os/signal.init.0
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:29 +0x43
    
    goroutine 7 [runnable]:
    text/template/parse.(*lexer).run(0xc00013c630)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:228
    created by text/template/parse.lex
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:223 +0x192
    
    rax    0x0
    rbx    0x7f6085524840
    rcx    0x7f6085176f47
    rdx    0x0
    rdi    0x2
    rsi    0x7f6081f23830
    rbp    0x56521d22ee7c
    rsp    0x7f6081f23830
    r8     0x0
    r9     0x7f6081f23830
    r10    0x8
    r11    0x246
    r12    0x56521fa27540
    r13    0x0
    r14    0x56521d214d10
    r15    0x0
    rip    0x7f6085176f47
    rflags 0x246
    cs     0x33
    fs     0x0
    gs     0x0
    name: apiPolicy
    operatorEmail: support@radware.com
    protections:
    runtime: failed to create new OS thread (have 5 already; errno=11)
    runtime: may need to increase max user processes (ulimit -u)
    fatal error: newosproc
    
    runtime stack:
    runtime.throw(0x1acaa5a, 0x9)
    	/usr/local/go/src/runtime/panic.go:1116 +0x72
    runtime.newosproc(0xc000088000)
    	/usr/local/go/src/runtime/os_linux.go:161 +0x1c5
    runtime.newm1(0xc000088000)
    	/usr/local/go/src/runtime/proc.go:1837 +0xdd
    runtime.newm(0x1bb7c48, 0xc00004b000, 0x4)
    	/usr/local/go/src/runtime/proc.go:1816 +0x9b
    runtime.startm(0x0, 0xc000073f01)
    	/usr/local/go/src/runtime/proc.go:1973 +0xc9
    runtime.wakep()
    	/usr/local/go/src/runtime/proc.go:2061 +0x66
    runtime.resetspinning()
    	/usr/local/go/src/runtime/proc.go:2533 +0x59
    runtime.schedule()
    	/usr/local/go/src/runtime/proc.go:2684 +0x2b9
    runtime.mstart1()
    	/usr/local/go/src/runtime/proc.go:1179 +0x93
    runtime.mstart()
    	/usr/local/go/src/runtime/proc.go:1137 +0x6e
    
    goroutine 1 [chan receive, locked to thread]:
    runtime.gopark(0x1bb7a80, 0xc0000420c8, 0x170e, 0x2)
    	/usr/local/go/src/runtime/proc.go:306 +0xe5
    runtime.chanrecv(0xc000042070, 0x0, 0xc000000101, 0x41a55e)
    	/usr/local/go/src/runtime/chan.go:577 +0x36f
    runtime.chanrecv1(0xc000042070, 0x0)
    	/usr/local/go/src/runtime/chan.go:439 +0x2b
    runtime.gcenable()
    	/usr/local/go/src/runtime/mgc.go:219 +0x95
    runtime.main()
    	/usr/local/go/src/runtime/proc.go:167 +0x11e
    runtime.goexit()
    	/usr/local/go/src/runtime/asm_amd64.s:1374 +0x1
    runtime/cgo: pthread_create failed: Resource temporarily unavailable
    SIGABRT: abort
    PC=0x7fc85cb32f47 m=0 sigcode=18446744073709551610
    
    goroutine 0 [idle]:
    runtime: unknown pc 0x7fc85cb32f47
    stack: frame={sp:0x7ffd0de53b10, fp:0x0} stack=[0x7ffd0d655010,0x7ffd0de54040)
    00007ffd0de53a10:  2f3a656300000001  6e69622f70616e73 
    00007ffd0de53a20:  00007fc85cee0420  000000c420081fe0 
    00007ffd0de53a30:  0000000000000000  0000000000000000 
    00007ffd0de53a40:  0000000000000000  0000000000000000 
    00007ffd0de53a50:  0000000000000003  000000c420081fd8 
    00007ffd0de53a60:  0000000000000000  0000000000000120 
    00007ffd0de53a70:  0000001300000000  0000000000000007 
    00007ffd0de53a80:  0000000000000130  000055652896b098 
    00007ffd0de53a90:  0000000000000150  ffffffffffffffa8 
    00007ffd0de53aa0:  0000000000000004  0000003400000013 
    00007ffd0de53ab0:  0000000000000000  0000000000000000 
    00007ffd0de53ac0:  0000000000000000  000000770000007c 
    00007ffd0de53ad0:  0000005b0000006e  0000000000000000 
    00007ffd0de53ae0:  0000000000000000  0000000000020ab0 
    00007ffd0de53af0:  0000000000000120  00007fc85d117307 
    00007ffd0de53b00:  000055652896b550  0000000000000001 
    00007ffd0de53b10: <0000000000000000  000055652896b570 
    00007ffd0de53b20:  00007fc85d3240d0  00007ffd0de53b68 
    00007ffd0de53b30:  0000556526761582 <runtime.step+290>  00005565274bd232 
    00007ffd0de53b40:  000000000030da24  000000000030da24 
    00007ffd0de53b50:  0000029300000002  000000505ceecec5 
    00007ffd0de53b60:  000000000030da24  00007ffd0de53c18 
    00007ffd0de53b70:  0000556526760936 <runtime.pcvalue+342>  00005565274d3828 
    00007ffd0de53b80:  00000000002f742e  00000000002f742e 
    00007ffd0de53b90:  fffffffe7fffffff  ffffffffffffffff 
    00007ffd0de53ba0:  ffffffffffffffff  ffffffffffffffff 
    00007ffd0de53bb0:  ffffffffffffffff  ffffffffffffffff 
    00007ffd0de53bc0:  ffffffffffffffff  ffffffffffffffff 
    00007ffd0de53bd0:  ffffffffffffffff  ffffffffffffffff 
    00007ffd0de53be0:  ffffffffffffffff  ffffffffffffffff 
    00007ffd0de53bf0:  ffffffffffffffff  ffffffffffffffff 
    00007ffd0de53c00:  ffffffffffffffff  ffffffffffffffff 
    runtime: unknown pc 0x7fc85cb32f47
    stack: frame={sp:0x7ffd0de53b10, fp:0x0} stack=[0x7ffd0d655010,0x7ffd0de54040)
    00007ffd0de53a10:  2f3a656300000001  6e69622f70616e73 
    00007ffd0de53a20:  00007fc85cee0420  000000c420081fe0 
    00007ffd0de53a30:  0000000000000000  0000000000000000 
    00007ffd0de53a40:  0000000000000000  0000000000000000 
    00007ffd0de53a50:  0000000000000003  000000c420081fd8 
    00007ffd0de53a60:  0000000000000000  0000000000000120 
    00007ffd0de53a70:  0000001300000000  0000000000000007 
    00007ffd0de53a80:  0000000000000130  000055652896b098 
    00007ffd0de53a90:  0000000000000150  ffffffffffffffa8 
    00007ffd0de53aa0:  0000000000000004  0000003400000013 
    00007ffd0de53ab0:  0000000000000000  0000000000000000 
    00007ffd0de53ac0:  0000000000000000  000000770000007c 
    00007ffd0de53ad0:  0000005b0000006e  0000000000000000 
    00007ffd0de53ae0:  0000000000000000  0000000000020ab0 
    00007ffd0de53af0:  0000000000000120  00007fc85d117307 
    00007ffd0de53b00:  000055652896b550  0000000000000001 
    00007ffd0de53b10: <0000000000000000  000055652896b570 
    00007ffd0de53b20:  00007fc85d3240d0  00007ffd0de53b68 
    00007ffd0de53b30:  0000556526761582 <runtime.step+290>  00005565274bd232 
    00007ffd0de53b40:  000000000030da24  000000000030da24 
    00007ffd0de53b50:  0000029300000002  000000505ceecec5 
    00007ffd0de53b60:  000000000030da24  00007ffd0de53c18 
    00007ffd0de53b70:  0000556526760936 <runtime.pcvalue+342>  00005565274d3828 
    00007ffd0de53b80:  00000000002f742e  00000000002f742e 
    00007ffd0de53b90:  fffffffe7fffffff  ffffffffffffffff 
    00007ffd0de53ba0:  ffffffffffffffff  ffffffffffffffff 
    00007ffd0de53bb0:  ffffffffffffffff  ffffffffffffffff 
    00007ffd0de53bc0:  ffffffffffffffff  ffffffffffffffff 
    00007ffd0de53bd0:  ffffffffffffffff  ffffffffffffffff 
    00007ffd0de53be0:  ffffffffffffffff  ffffffffffffffff 
    00007ffd0de53bf0:  ffffffffffffffff  ffffffffffffffff 
    00007ffd0de53c00:  ffffffffffffffff  ffffffffffffffff 
    
    goroutine 1 [running, locked to thread]:
    runtime.asmcgocall(0x556526e0da30, 0xc420081f10)
    	/usr/lib/go-1.10/src/runtime/asm_amd64.s:673 +0x3f fp=0xc420081ee8 sp=0xc420081ee0 pc=0x55652676fbcf
    runtime.newm1(0xc420061000)
    	/usr/lib/go-1.10/src/runtime/proc.go:1874 +0xd1 fp=0xc420081f38 sp=0xc420081ee8 pc=0x5565267496b1
    runtime.newm(0x556527439b08, 0x0)
    	/usr/lib/go-1.10/src/runtime/proc.go:1858 +0x9f fp=0xc420081f68 sp=0xc420081f38 pc=0x55652674952f
    runtime.startTemplateThread()
    	/usr/lib/go-1.10/src/runtime/proc.go:1891 +0x51 fp=0xc420081f88 sp=0xc420081f68 pc=0x556526749791
    runtime.main()
    	/usr/lib/go-1.10/src/runtime/proc.go:181 +0x1a9 fp=0xc420081fe0 sp=0xc420081f88 pc=0x5565267454b9
    runtime.goexit()
    	/usr/lib/go-1.10/src/runtime/asm_amd64.s:2361 +0x1 fp=0xc420081fe8 sp=0xc420081fe0 pc=0x556526770f31
    
    rax    0x0
    rbx    0x7fc85cee0840
    rcx    0x7fc85cb32f47
    rdx    0x0
    rdi    0x2
    rsi    0x7ffd0de53b10
    rbp    0x556526f3f32a
    rsp    0x7ffd0de53b10
    r8     0x0
    r9     0x7ffd0de53b10
    r10    0x8
    r11    0x246
    r12    0x55652896b690
    r13    0xf1
    r14    0x11
    r15    0x0
    rip    0x7fc85cb32f47
    rflags 0x246
    cs     0x33
    fs     0x0
    gs     0x0
