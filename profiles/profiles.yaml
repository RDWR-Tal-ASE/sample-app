apiVersion: waas.radware.com/v1beta1
kind: Profile
metadata:
  name:  waas-api-profile
  namespace: kwaf
  labels:
    release: waas
spec:
  policies:
  - classifiers:
    runtime/cgo: pthread_create failed: Resource temporarily unavailable
    SIGABRT: abort
    PC=0x7f665c2a3f47 m=4 sigcode=18446744073709551610
    
    goroutine 0 [idle]:
    runtime: unknown pc 0x7f665c2a3f47
    stack: frame={sp:0x7f6659050830, fp:0x0} stack=[0x7f6658851288,0x7f6659050e88)
    00007f6659050730:  00007f6659050af0  00007f665c88c75a 
    00007f6659050740:  000000000000000b  0000000000000000 
    00007f6659050750:  00007f664b69e700  00005565d7367148 
    00007f6659050760:  00007f6659050c40  00005565d8379540 
    00007f6659050770:  0000000000000000  00005565d6843d10 
    00007f6659050780:  0000000000000000  00007f665c884f13 
    00007f6659050790:  0000000000000005  0000000000000000 
    00007f66590507a0:  2525252525252525  2525252525252525 
    00007f66590507b0:  00000000000000ff  0000000000000000 
    00007f66590507c0:  00000000000000ff  0000000000000000 
    00007f66590507d0:  00007f6644000010  00007f6644000010 
    00007f66590507e0:  000000000000000e  000000000000000e 
    00007f66590507f0:  0000000000000000  0000000000000000 
    00007f6659050800:  ffffffffffffffff  ffffffffffffffff 
    00007f6659050810:  0000000400000004  0000000400000004 
    00007f6659050820:  20636f6c6c616d00  203a64656c696166 
    00007f6659050830: <0000000000000000  0000000000000000 
    00007f6659050840:  0000000000000000  0000000000000000 
    00007f6659050850:  0000000000000000  0000000000000000 
    00007f6659050860:  0000000000000000  0000000000000000 
    00007f6659050870:  0000000000000000  0000000000000000 
    00007f6659050880:  0000000000000000  0000000000000000 
    00007f6659050890:  0000000000000000  0000000000000000 
    00007f66590508a0:  0000000000000000  0000000000000000 
    00007f66590508b0:  fffffffe7fffffff  ffffffffffffffff 
    00007f66590508c0:  ffffffffffffffff  ffffffffffffffff 
    00007f66590508d0:  ffffffffffffffff  ffffffffffffffff 
    00007f66590508e0:  ffffffffffffffff  ffffffffffffffff 
    00007f66590508f0:  ffffffffffffffff  ffffffffffffffff 
    00007f6659050900:  ffffffffffffffff  ffffffffffffffff 
    00007f6659050910:  ffffffffffffffff  ffffffffffffffff 
    00007f6659050920:  ffffffffffffffff  ffffffffffffffff 
    runtime: unknown pc 0x7f665c2a3f47
    stack: frame={sp:0x7f6659050830, fp:0x0} stack=[0x7f6658851288,0x7f6659050e88)
    00007f6659050730:  00007f6659050af0  00007f665c88c75a 
    00007f6659050740:  000000000000000b  0000000000000000 
    00007f6659050750:  00007f664b69e700  00005565d7367148 
    00007f6659050760:  00007f6659050c40  00005565d8379540 
    00007f6659050770:  0000000000000000  00005565d6843d10 
    00007f6659050780:  0000000000000000  00007f665c884f13 
    00007f6659050790:  0000000000000005  0000000000000000 
    00007f66590507a0:  2525252525252525  2525252525252525 
    00007f66590507b0:  00000000000000ff  0000000000000000 
    00007f66590507c0:  00000000000000ff  0000000000000000 
    00007f66590507d0:  00007f6644000010  00007f6644000010 
    00007f66590507e0:  000000000000000e  000000000000000e 
    00007f66590507f0:  0000000000000000  0000000000000000 
    00007f6659050800:  ffffffffffffffff  ffffffffffffffff 
    00007f6659050810:  0000000400000004  0000000400000004 
    00007f6659050820:  20636f6c6c616d00  203a64656c696166 
    00007f6659050830: <0000000000000000  0000000000000000 
    00007f6659050840:  0000000000000000  0000000000000000 
    00007f6659050850:  0000000000000000  0000000000000000 
    00007f6659050860:  0000000000000000  0000000000000000 
    00007f6659050870:  0000000000000000  0000000000000000 
    00007f6659050880:  0000000000000000  0000000000000000 
    00007f6659050890:  0000000000000000  0000000000000000 
    00007f66590508a0:  0000000000000000  0000000000000000 
    00007f66590508b0:  fffffffe7fffffff  ffffffffffffffff 
    00007f66590508c0:  ffffffffffffffff  ffffffffffffffff 
    00007f66590508d0:  ffffffffffffffff  ffffffffffffffff 
    00007f66590508e0:  ffffffffffffffff  ffffffffffffffff 
    00007f66590508f0:  ffffffffffffffff  ffffffffffffffff 
    00007f6659050900:  ffffffffffffffff  ffffffffffffffff 
    00007f6659050910:  ffffffffffffffff  ffffffffffffffff 
    00007f6659050920:  ffffffffffffffff  ffffffffffffffff 
    
    goroutine 1 [chan receive, locked to thread]:
    text/template/parse.(*lexer).nextItem(...)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:195
    text/template/parse.(*Tree).peek(...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:95
    text/template/parse.(*Tree).parse(0xc000132500)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:277 +0xbc6
    text/template/parse.(*Tree).Parse(0xc000132500, 0x5565d66f3440, 0x16c, 0x0, 0x0, 0x0, 0x0, 0xc0001dc6f0, 0xc000158340, 0x2, ...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:230 +0x249
    text/template/parse.Parse(0x5565d66989b7, 0x4, 0x5565d66f3440, 0x16c, 0x0, 0x0, 0x0, 0x0, 0xc000158340, 0x2, ...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:55 +0x124
    text/template.(*Template).Parse(0xc00009d7c0, 0x5565d66f3440, 0x16c, 0x4, 0xc00011f5e8, 0x5565d7382760)
    	/usr/lib/go-1.13/src/text/template/template.go:200 +0x113
    github.com/snapcore/snapd/systemd.init()
    	/build/snapd/parts/snapd-deb/build/systemd/systemd.go:1281 +0x3ad
    
    goroutine 19 [syscall]:
    os/signal.signal_recv(0x0)
    	/usr/lib/go-1.13/src/runtime/sigqueue.go:147 +0x9e
    os/signal.loop()
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:23 +0x24
    created by os/signal.init.0
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:29 +0x43
    
    goroutine 20 [runnable]:
    text/template/parse.(*lexer).run(0xc000160630)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:228
    created by text/template/parse.lex
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:223 +0x192
    
    rax    0x0
    rbx    0x7f665c651840
    rcx    0x7f665c2a3f47
    rdx    0x0
    rdi    0x2
    rsi    0x7f6659050830
    rbp    0x5565d685de7c
    rsp    0x7f6659050830
    r8     0x0
    r9     0x7f6659050830
    r10    0x8
    r11    0x246
    r12    0x5565d8379540
    r13    0x0
    r14    0x5565d6843d10
    r15    0x0
    rip    0x7f665c2a3f47
    rflags 0x246
    cs     0x33
    fs     0x0
    gs     0x0
    name: apiPolicy
    operatorEmail: support@radware.com
    protections:
    runtime: failed to create new OS thread (have 5 already; errno=11)
    runtime: may need to increase max user processes (ulimit -u)
    fatal error: newosproc
    
    runtime stack:
    runtime.throw(0x1acaa5a, 0x9)
    	/usr/local/go/src/runtime/panic.go:1116 +0x72
    runtime.newosproc(0xc000088000)
    	/usr/local/go/src/runtime/os_linux.go:161 +0x1c5
    runtime.newm1(0xc000088000)
    	/usr/local/go/src/runtime/proc.go:1837 +0xdd
    runtime.newm(0x1bb7c48, 0xc00004b000, 0x4)
    	/usr/local/go/src/runtime/proc.go:1816 +0x9b
    runtime.startm(0x0, 0xc000073f01)
    	/usr/local/go/src/runtime/proc.go:1973 +0xc9
    runtime.wakep()
    	/usr/local/go/src/runtime/proc.go:2061 +0x66
    runtime.resetspinning()
    	/usr/local/go/src/runtime/proc.go:2533 +0x59
    runtime.schedule()
    	/usr/local/go/src/runtime/proc.go:2684 +0x2b9
    runtime.mstart1()
    	/usr/local/go/src/runtime/proc.go:1179 +0x93
    runtime.mstart()
    	/usr/local/go/src/runtime/proc.go:1137 +0x6e
    
    goroutine 1 [chan receive, locked to thread]:
    runtime.gopark(0x1bb7a80, 0xc0000420c8, 0x170e, 0x2)
    	/usr/local/go/src/runtime/proc.go:306 +0xe5
    runtime.chanrecv(0xc000042070, 0x0, 0xc000000101, 0x410101)
    	/usr/local/go/src/runtime/chan.go:577 +0x36f
    runtime.chanrecv1(0xc000042070, 0x0)
    	/usr/local/go/src/runtime/chan.go:439 +0x2b
    runtime.gcenable()
    	/usr/local/go/src/runtime/mgc.go:220 +0xac
    runtime.main()
    	/usr/local/go/src/runtime/proc.go:167 +0x11e
    runtime.goexit()
    	/usr/local/go/src/runtime/asm_amd64.s:1374 +0x1
    runtime/cgo: pthread_create failed: Resource temporarily unavailable
    SIGABRT: abort
    PC=0x7f30ff9c4f47 m=3 sigcode=18446744073709551610
    
    goroutine 0 [idle]:
    runtime: unknown pc 0x7f30ff9c4f47
    stack: frame={sp:0x7f30fcf72830, fp:0x0} stack=[0x7f30fc773288,0x7f30fcf72e88)
    00007f30fcf72730:  00007f30fcf72af0  00007f30fffad75a 
    00007f30fcf72740:  000000000000000b  0000000000000000 
    00007f30fcf72750:  00007f30f67fc700  000055645a552148 
    00007f30fcf72760:  00007f30fcf72c40  00007f30f0000c50 
    00007f30fcf72770:  0000000000000000  0000556459a2ed10 
    00007f30fcf72780:  0000000000000000  00007f30fffa5f13 
    00007f30fcf72790:  0000000000000005  0000000000000000 
    00007f30fcf727a0:  2525252525252525  2525252525252525 
    00007f30fcf727b0:  00000000000000ff  0000000000000000 
    00007f30fcf727c0:  00000000000000ff  0000000000000000 
    00007f30fcf727d0:  00007f30f0000010  00007f30f0000010 
    00007f30fcf727e0:  000000000000000e  000000000000000e 
    00007f30fcf727f0:  0000000000000000  0000000000000000 
    00007f30fcf72800:  ffffffffffffffff  ffffffffffffffff 
    00007f30fcf72810:  0000000400000004  0000000400000004 
    00007f30fcf72820:  20636f6c6c616d00  203a64656c696166 
    00007f30fcf72830: <0000000000000000  0000000000000000 
    00007f30fcf72840:  0000000000000000  0000000000000000 
    00007f30fcf72850:  0000000000000000  0000000000000000 
    00007f30fcf72860:  0000000000000000  0000000000000000 
    00007f30fcf72870:  0000000000000000  0000000000000000 
    00007f30fcf72880:  0000000000000000  0000000000000000 
    00007f30fcf72890:  0000000000000000  0000000000000000 
    00007f30fcf728a0:  0000000000000000  0000000000000000 
    00007f30fcf728b0:  fffffffe7fffffff  ffffffffffffffff 
    00007f30fcf728c0:  ffffffffffffffff  ffffffffffffffff 
    00007f30fcf728d0:  ffffffffffffffff  ffffffffffffffff 
    00007f30fcf728e0:  ffffffffffffffff  ffffffffffffffff 
    00007f30fcf728f0:  ffffffffffffffff  ffffffffffffffff 
    00007f30fcf72900:  ffffffffffffffff  ffffffffffffffff 
    00007f30fcf72910:  ffffffffffffffff  ffffffffffffffff 
    00007f30fcf72920:  ffffffffffffffff  ffffffffffffffff 
    runtime: unknown pc 0x7f30ff9c4f47
    stack: frame={sp:0x7f30fcf72830, fp:0x0} stack=[0x7f30fc773288,0x7f30fcf72e88)
    00007f30fcf72730:  00007f30fcf72af0  00007f30fffad75a 
    00007f30fcf72740:  000000000000000b  0000000000000000 
    00007f30fcf72750:  00007f30f67fc700  000055645a552148 
    00007f30fcf72760:  00007f30fcf72c40  00007f30f0000c50 
    00007f30fcf72770:  0000000000000000  0000556459a2ed10 
    00007f30fcf72780:  0000000000000000  00007f30fffa5f13 
    00007f30fcf72790:  0000000000000005  0000000000000000 
    00007f30fcf727a0:  2525252525252525  2525252525252525 
    00007f30fcf727b0:  00000000000000ff  0000000000000000 
    00007f30fcf727c0:  00000000000000ff  0000000000000000 
    00007f30fcf727d0:  00007f30f0000010  00007f30f0000010 
    00007f30fcf727e0:  000000000000000e  000000000000000e 
    00007f30fcf727f0:  0000000000000000  0000000000000000 
    00007f30fcf72800:  ffffffffffffffff  ffffffffffffffff 
    00007f30fcf72810:  0000000400000004  0000000400000004 
    00007f30fcf72820:  20636f6c6c616d00  203a64656c696166 
    00007f30fcf72830: <0000000000000000  0000000000000000 
    00007f30fcf72840:  0000000000000000  0000000000000000 
    00007f30fcf72850:  0000000000000000  0000000000000000 
    00007f30fcf72860:  0000000000000000  0000000000000000 
    00007f30fcf72870:  0000000000000000  0000000000000000 
    00007f30fcf72880:  0000000000000000  0000000000000000 
    00007f30fcf72890:  0000000000000000  0000000000000000 
    00007f30fcf728a0:  0000000000000000  0000000000000000 
    00007f30fcf728b0:  fffffffe7fffffff  ffffffffffffffff 
    00007f30fcf728c0:  ffffffffffffffff  ffffffffffffffff 
    00007f30fcf728d0:  ffffffffffffffff  ffffffffffffffff 
    00007f30fcf728e0:  ffffffffffffffff  ffffffffffffffff 
    00007f30fcf728f0:  ffffffffffffffff  ffffffffffffffff 
    00007f30fcf72900:  ffffffffffffffff  ffffffffffffffff 
    00007f30fcf72910:  ffffffffffffffff  ffffffffffffffff 
    00007f30fcf72920:  ffffffffffffffff  ffffffffffffffff 
    
    goroutine 1 [chan receive, locked to thread]:
    text/template/parse.(*lexer).nextItem(...)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:195
    text/template/parse.(*Tree).next(...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:64
    text/template/parse.(*Tree).nextNonSpace(0xc00011c500, 0x0, 0x0, 0x0, 0x0, 0x0)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:102 +0x14e
    text/template/parse.(*Tree).parse(0xc00011c500)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:281 +0x2f6
    text/template/parse.(*Tree).Parse(0xc00011c500, 0x5564598de440, 0x16c, 0x0, 0x0, 0x0, 0x0, 0xc0001c4720, 0xc000142350, 0x2, ...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:230 +0x249
    text/template/parse.Parse(0x5564598839b7, 0x4, 0x5564598de440, 0x16c, 0x0, 0x0, 0x0, 0x0, 0xc000142350, 0x2, ...)
    	/usr/lib/go-1.13/src/text/template/parse/parse.go:55 +0x124
    text/template.(*Template).Parse(0xc00003d840, 0x5564598de440, 0x16c, 0x4, 0xc0001095e8, 0x55645a56d760)
    	/usr/lib/go-1.13/src/text/template/template.go:200 +0x113
    github.com/snapcore/snapd/systemd.init()
    	/build/snapd/parts/snapd-deb/build/systemd/systemd.go:1281 +0x3ad
    
    goroutine 6 [syscall]:
    os/signal.signal_recv(0x0)
    	/usr/lib/go-1.13/src/runtime/sigqueue.go:147 +0x9e
    os/signal.loop()
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:23 +0x24
    created by os/signal.init.0
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:29 +0x43
    
    goroutine 7 [runnable]:
    text/template/parse.(*lexer).emit(...)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:157
    text/template/parse.lexLeftDelim(0xc00014a630, 0x556459ffd888)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:307 +0x1e0
    text/template/parse.(*lexer).run(0xc00014a630)
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:230 +0x39
    created by text/template/parse.lex
    	/usr/lib/go-1.13/src/text/template/parse/lex.go:223 +0x192
    
    rax    0x0
    rbx    0x7f30ffd72840
    rcx    0x7f30ff9c4f47
    rdx    0x0
    rdi    0x2
    rsi    0x7f30fcf72830
    rbp    0x556459a48e7c
    rsp    0x7f30fcf72830
    r8     0x0
    r9     0x7f30fcf72830
    r10    0x8
    r11    0x246
    r12    0x7f30f0000c50
    r13    0x0
    r14    0x556459a2ed10
    r15    0x0
    rip    0x7f30ff9c4f47
    rflags 0x246
    cs     0x33
    fs     0x0
    gs     0x0
