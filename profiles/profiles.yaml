apiVersion: waas.radware.com/v1beta1
kind: Profile
metadata:
  name:  waas-api-profile
  namespace: kwaf
  labels:
    release: waas
spec:
  policies:
  - classifiers:
    system_key.go:147: cannot determine seccomp compiler version in generateSystemKey: 
    -----
    runtime/cgo: pthread_create failed: Resource temporarily unavailable
    SIGABRT: abort
    PC=0x7fb3e6dcaf47 m=0 sigcode=18446744073709551610
    
    goroutine 0 [idle]:
    runtime: unknown pc 0x7fb3e6dcaf47
    stack: frame={sp:0x7ffff6c807e0, fp:0x0} stack=[0x7ffff6481e20,0x7ffff6c80e60)
    00007ffff6c806e0:  00007fb3e75c54c8  00007fb3e717fc58 
    00007ffff6c806f0:  00007ffff6c80aa0  00007fb3e73b375a 
    00007ffff6c80700:  000000000000000b  0000000000000000 
    00007ffff6c80710:  00007fb3e4379700  00000000008661c8 
    00007ffff6c80720:  00007ffff6c80bf0  00000000013913f0 
    00007ffff6c80730:  0000000000000000  0000000000593e90 
    00007ffff6c80740:  0000000000000000  00007fb3e73abf13 
    00007ffff6c80750:  0000000000000005  0000000000000000 
    00007ffff6c80760:  2525252525252525  2525252525252525 
    00007ffff6c80770:  00000000ff00ff00  0000000000000000 
    00007ffff6c80780:  00000000ff000000  0000000000000000 
    00007ffff6c80790:  0000000000000000  0000000000000000 
    00007ffff6c807a0:  2f7273752f3a6e69  73752f3a6e696273 
    00007ffff6c807b0:  752f3a6e69622f72  6c61636f6c2f7273 
    00007ffff6c807c0:  73752f3a6e69622f  732f6e6962732f72 
    00007ffff6c807d0:  2f3a656369767265  6e69622f70616e73 
    00007ffff6c807e0: <0000000000000000  656c69616620636f 
    00007ffff6c807f0:  0000000000000000  0000000000000000 
    00007ffff6c80800:  0000000000000000  0000000000000000 
    00007ffff6c80810:  0000000000000000  0000000000000000 
    00007ffff6c80820:  0000000000000000  0000000000000000 
    00007ffff6c80830:  0000000000000000  0000000000000000 
    00007ffff6c80840:  0000000000000000  0000000000000000 
    00007ffff6c80850:  0000000000000000  0000000000000000 
    00007ffff6c80860:  fffffffe7fffffff  ffffffffffffffff 
    00007ffff6c80870:  ffffffffffffffff  ffffffffffffffff 
    00007ffff6c80880:  ffffffffffffffff  ffffffffffffffff 
    00007ffff6c80890:  ffffffffffffffff  ffffffffffffffff 
    00007ffff6c808a0:  ffffffffffffffff  ffffffffffffffff 
    00007ffff6c808b0:  ffffffffffffffff  ffffffffffffffff 
    00007ffff6c808c0:  ffffffffffffffff  ffffffffffffffff 
    00007ffff6c808d0:  ffffffffffffffff  ffffffffffffffff 
    runtime: unknown pc 0x7fb3e6dcaf47
    stack: frame={sp:0x7ffff6c807e0, fp:0x0} stack=[0x7ffff6481e20,0x7ffff6c80e60)
    00007ffff6c806e0:  00007fb3e75c54c8  00007fb3e717fc58 
    00007ffff6c806f0:  00007ffff6c80aa0  00007fb3e73b375a 
    00007ffff6c80700:  000000000000000b  0000000000000000 
    00007ffff6c80710:  00007fb3e4379700  00000000008661c8 
    00007ffff6c80720:  00007ffff6c80bf0  00000000013913f0 
    00007ffff6c80730:  0000000000000000  0000000000593e90 
    00007ffff6c80740:  0000000000000000  00007fb3e73abf13 
    00007ffff6c80750:  0000000000000005  0000000000000000 
    00007ffff6c80760:  2525252525252525  2525252525252525 
    00007ffff6c80770:  00000000ff00ff00  0000000000000000 
    00007ffff6c80780:  00000000ff000000  0000000000000000 
    00007ffff6c80790:  0000000000000000  0000000000000000 
    00007ffff6c807a0:  2f7273752f3a6e69  73752f3a6e696273 
    00007ffff6c807b0:  752f3a6e69622f72  6c61636f6c2f7273 
    00007ffff6c807c0:  73752f3a6e69622f  732f6e6962732f72 
    00007ffff6c807d0:  2f3a656369767265  6e69622f70616e73 
    00007ffff6c807e0: <0000000000000000  656c69616620636f 
    00007ffff6c807f0:  0000000000000000  0000000000000000 
    00007ffff6c80800:  0000000000000000  0000000000000000 
    00007ffff6c80810:  0000000000000000  0000000000000000 
    00007ffff6c80820:  0000000000000000  0000000000000000 
    00007ffff6c80830:  0000000000000000  0000000000000000 
    00007ffff6c80840:  0000000000000000  0000000000000000 
    00007ffff6c80850:  0000000000000000  0000000000000000 
    00007ffff6c80860:  fffffffe7fffffff  ffffffffffffffff 
    00007ffff6c80870:  ffffffffffffffff  ffffffffffffffff 
    00007ffff6c80880:  ffffffffffffffff  ffffffffffffffff 
    00007ffff6c80890:  ffffffffffffffff  ffffffffffffffff 
    00007ffff6c808a0:  ffffffffffffffff  ffffffffffffffff 
    00007ffff6c808b0:  ffffffffffffffff  ffffffffffffffff 
    00007ffff6c808c0:  ffffffffffffffff  ffffffffffffffff 
    00007ffff6c808d0:  ffffffffffffffff  ffffffffffffffff 
    
    goroutine 1 [running, locked to thread]:
    runtime.systemstack_switch()
    	/usr/lib/go-1.13/src/runtime/asm_amd64.s:330 fp=0xc00003c6c8 sp=0xc00003c6c0 pc=0x456b50
    runtime.newproc(0x0, 0x57a308)
    	/usr/lib/go-1.13/src/runtime/proc.go:3255 +0x6e fp=0xc00003c710 sp=0xc00003c6c8 pc=0x437e5e
    runtime.init.5()
    	/usr/lib/go-1.13/src/runtime/proc.go:242 +0x35 fp=0xc00003c730 sp=0xc00003c710 pc=0x430745
    runtime.doInit(0x874ae0)
    	/usr/lib/go-1.13/src/runtime/proc.go:5222 +0x8a fp=0xc00003c760 sp=0xc00003c730 pc=0x43c58a
    runtime.main()
    	/usr/lib/go-1.13/src/runtime/proc.go:150 +0xc3 fp=0xc00003c7e0 sp=0xc00003c760 pc=0x430433
    runtime.goexit()
    	/usr/lib/go-1.13/src/runtime/asm_amd64.s:1357 +0x1 fp=0xc00003c7e8 sp=0xc00003c7e0 pc=0x458c21
    
    rax    0x0
    rbx    0x7fb3e7178840
    rcx    0x7fb3e6dcaf47
    rdx    0x0
    rdi    0x2
    rsi    0x7ffff6c807e0
    rbp    0x59f2ca
    rsp    0x7ffff6c807e0
    r8     0x0
    r9     0x7ffff6c807e0
    r10    0x8
    r11    0x246
    r12    0x13913f0
    r13    0x0
    r14    0x593e90
    r15    0x0
    rip    0x7fb3e6dcaf47
    rflags 0x246
    cs     0x33
    fs     0x0
    gs     0x0
    -----
    internal error, please report: running "yq" failed: timeout waiting for snap system profiles to get updated
    name: apiPolicy
    operatorEmail: support@radware.com
    protections:
    system_key.go:147: cannot determine seccomp compiler version in generateSystemKey: fork/exec /snap/snapd/15534/usr/lib/snapd/snap-seccomp: resource temporarily unavailable
    runtime: failed to create new OS thread (have 10 already; errno=11)
    runtime: may need to increase max user processes (ulimit -u)
    fatal error: newosproc
    
    runtime stack:
    runtime.throw(0x1acaa5a, 0x9)
    	/usr/local/go/src/runtime/panic.go:1116 +0x72
    runtime.newosproc(0xc000063400)
    	/usr/local/go/src/runtime/os_linux.go:161 +0x1c5
    runtime.newm1(0xc000063400)
    	/usr/local/go/src/runtime/proc.go:1837 +0xdd
    runtime.newm(0x1bb7c48, 0xc000055000, 0x9)
    	/usr/local/go/src/runtime/proc.go:1816 +0x9b
    runtime.startm(0x0, 0x426301)
    	/usr/local/go/src/runtime/proc.go:1973 +0xc9
    runtime.wakep()
    	/usr/local/go/src/runtime/proc.go:2061 +0x66
    runtime.resetspinning()
    	/usr/local/go/src/runtime/proc.go:2533 +0x59
    runtime.schedule()
    	/usr/local/go/src/runtime/proc.go:2684 +0x2b9
    runtime.park_m(0xc000001500)
    	/usr/local/go/src/runtime/proc.go:2845 +0x9d
    runtime.mcall(0x0)
    	/usr/local/go/src/runtime/asm_amd64.s:318 +0x5b
    
    goroutine 1 [runnable, locked to thread]:
    k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/util/templates.(*ASCIIRenderer).Paragraph(0xc000181a00, 0xc000709b00, 0xc0002b84c0)
    	/workspace/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/util/templates/markdown.go:84 +0x85
    k8s.io/kubernetes/vendor/github.com/russross/blackfriday.(*parser).renderParagraph(0xc00090b200, 0xc000709b00, 0xc0008d4fc0, 0x3a, 0x205)
    	/workspace/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/github.com/russross/blackfriday/block.go:1335 +0x118
    k8s.io/kubernetes/vendor/github.com/russross/blackfriday.(*parser).paragraph(0xc00090b200, 0xc000709b00, 0xc0008d4fc0, 0x1ff, 0x205, 0x40e298)
    	/workspace/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/github.com/russross/blackfriday/block.go:1360 +0x9cf
    k8s.io/kubernetes/vendor/github.com/russross/blackfriday.(*parser).block(0xc00090b200, 0xc000709b00, 0xc0008d4fc0, 0x1ff, 0x205)
    	/workspace/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/github.com/russross/blackfriday/block.go:186 +0x3d4
    k8s.io/kubernetes/vendor/github.com/russross/blackfriday.secondPass(0xc00090b200, 0xc0008d4fc0, 0x1ff, 0x205, 0xc0008d4fc0, 0x1ff, 0x205)
    	/workspace/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/github.com/russross/blackfriday/markdown.go:459 +0x87
    k8s.io/kubernetes/vendor/github.com/russross/blackfriday.MarkdownOptions(0xc0008cac00, 0x1fe, 0x200, 0x1d4e100, 0xc000181a00, 0x1, 0x0, 0xa, 0xa, 0x1b83da8)
    	/workspace/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/github.com/russross/blackfriday/markdown.go:389 +0x1e5
    k8s.io/kubernetes/vendor/github.com/russross/blackfriday.Markdown(...)
    	/workspace/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/github.com/russross/blackfriday/markdown.go:343
    k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/util/templates.normalizer.markdown(0xc0008caa00, 0x1fe, 0xc0008caa00, 0x1fe)
    	/workspace/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/util/templates/normalizers.go:73 +0xcf
    k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/util/templates.LongDesc(0x1b83da8, 0x20d, 0x0, 0x0)
    	/workspace/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/util/templates/normalizers.go:34 +0x6f
    k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/describe.init()
    	/workspace/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/k8s.io/kubectl/pkg/cmd/describe/describe.go:38 +0x65
    
    goroutine 18 [chan receive]:
    k8s.io/kubernetes/vendor/k8s.io/klog/v2.(*loggingT).flushDaemon(0x2a6c040)
    	/workspace/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/k8s.io/klog/v2/klog.go:1169 +0x8b
    created by k8s.io/kubernetes/vendor/k8s.io/klog/v2.init.0
    	/workspace/src/k8s.io/kubernetes/_output/dockerized/go/src/k8s.io/kubernetes/vendor/k8s.io/klog/v2/klog.go:417 +0xdf
    runtime/cgo: pthread_create failed: Resource temporarily unavailable
    SIGABRT: abort
    PC=0x7fea156e1f47 m=3 sigcode=18446744073709551610
    
    goroutine 0 [idle]:
    runtime: unknown pc 0x7fea156e1f47
    stack: frame={sp:0x7fea12c8f820, fp:0x0} stack=[0x7fea12490288,0x7fea12c8fe88)
    00007fea12c8f720:  00000000001ec4ef  00007fea15a96c58 
    00007fea12c8f730:  00007fea12c8fae0  00007fea15cca75a 
    00007fea12c8f740:  000000000000000b  0000000000000000 
    00007fea12c8f750:  00007fea0b1c6700  0000564c92774148 
    00007fea12c8f760:  00007fea12c8fc30  00007fea0c000c50 
    00007fea12c8f770:  0000000000000000  0000564c91c50d10 
    00007fea12c8f780:  0000000000000000  00007fea15cc2f13 
    00007fea12c8f790:  0000000000000005  0000000000000000 
    00007fea12c8f7a0:  2525252525252525  2525252525252525 
    00007fea12c8f7b0:  00000000000000ff  0000000000000000 
    00007fea12c8f7c0:  00000000000000ff  0000000000000000 
    00007fea12c8f7d0:  0000000000000000  0000000000000000 
    00007fea12c8f7e0:  2f3a707474682074  6f686c61636f6c2f 
    00007fea12c8f7f0:  79732f32762f7473  666e692d6d657473 
    00007fea12c8f800:  206c616964203a6f  75722f2078696e75 
    00007fea12c8f810:  2e6470616e732f6e  203a74656b636f73 
    00007fea12c8f820: <0000000000000000  203a64656c696166 
    00007fea12c8f830:  0000000000000000  0000000000000000 
    00007fea12c8f840:  6820746547203a72  6f6c2f2f3a707474 
    00007fea12c8f850:  2f74736f686c6163  65747379732f3276 
    00007fea12c8f860:  203a6f666e692d6d  696e75206c616964 
    00007fea12c8f870:  732f6e75722f2078  636f732e6470616e 
    00007fea12c8f880:  6e6f63203a74656b  6f63203a7463656e 
    00007fea12c8f890:  6e6f697463656e6e  6465737566657220 
    00007fea12c8f8a0:  fffffffe7fffffff  ffffffffffffffff 
    00007fea12c8f8b0:  ffffffffffffffff  ffffffffffffffff 
    00007fea12c8f8c0:  ffffffffffffffff  ffffffffffffffff 
    00007fea12c8f8d0:  ffffffffffffffff  ffffffffffffffff 
    00007fea12c8f8e0:  ffffffffffffffff  ffffffffffffffff 
    00007fea12c8f8f0:  ffffffffffffffff  ffffffffffffffff 
    00007fea12c8f900:  ffffffffffffffff  ffffffffffffffff 
    00007fea12c8f910:  ffffffffffffffff  ffffffffffffffff 
    runtime: unknown pc 0x7fea156e1f47
    stack: frame={sp:0x7fea12c8f820, fp:0x0} stack=[0x7fea12490288,0x7fea12c8fe88)
    00007fea12c8f720:  00000000001ec4ef  00007fea15a96c58 
    00007fea12c8f730:  00007fea12c8fae0  00007fea15cca75a 
    00007fea12c8f740:  000000000000000b  0000000000000000 
    00007fea12c8f750:  00007fea0b1c6700  0000564c92774148 
    00007fea12c8f760:  00007fea12c8fc30  00007fea0c000c50 
    00007fea12c8f770:  0000000000000000  0000564c91c50d10 
    00007fea12c8f780:  0000000000000000  00007fea15cc2f13 
    00007fea12c8f790:  0000000000000005  0000000000000000 
    00007fea12c8f7a0:  2525252525252525  2525252525252525 
    00007fea12c8f7b0:  00000000000000ff  0000000000000000 
    00007fea12c8f7c0:  00000000000000ff  0000000000000000 
    00007fea12c8f7d0:  0000000000000000  0000000000000000 
    00007fea12c8f7e0:  2f3a707474682074  6f686c61636f6c2f 
    00007fea12c8f7f0:  79732f32762f7473  666e692d6d657473 
    00007fea12c8f800:  206c616964203a6f  75722f2078696e75 
    00007fea12c8f810:  2e6470616e732f6e  203a74656b636f73 
    00007fea12c8f820: <0000000000000000  203a64656c696166 
    00007fea12c8f830:  0000000000000000  0000000000000000 
    00007fea12c8f840:  6820746547203a72  6f6c2f2f3a707474 
    00007fea12c8f850:  2f74736f686c6163  65747379732f3276 
    00007fea12c8f860:  203a6f666e692d6d  696e75206c616964 
    00007fea12c8f870:  732f6e75722f2078  636f732e6470616e 
    00007fea12c8f880:  6e6f63203a74656b  6f63203a7463656e 
    00007fea12c8f890:  6e6f697463656e6e  6465737566657220 
    00007fea12c8f8a0:  fffffffe7fffffff  ffffffffffffffff 
    00007fea12c8f8b0:  ffffffffffffffff  ffffffffffffffff 
    00007fea12c8f8c0:  ffffffffffffffff  ffffffffffffffff 
    00007fea12c8f8d0:  ffffffffffffffff  ffffffffffffffff 
    00007fea12c8f8e0:  ffffffffffffffff  ffffffffffffffff 
    00007fea12c8f8f0:  ffffffffffffffff  ffffffffffffffff 
    00007fea12c8f900:  ffffffffffffffff  ffffffffffffffff 
    00007fea12c8f910:  ffffffffffffffff  ffffffffffffffff 
    
    goroutine 1 [runnable]:
    github.com/snapcore/snapd/client.(*Client).do(0xc00036c1c0, 0x564c91aa4ee7, 0x3, 0x564c91aaed78, 0xf, 0x0, 0x0, 0x0, 0x0, 0x564c920fef40, ...)
    	/build/snapd/parts/snapd-deb/build/client/client.go:394 +0x2f9
    github.com/snapcore/snapd/client.(*Client).doSyncWithOpts(0xc00036c1c0, 0x564c91aa4ee7, 0x3, 0x564c91aaed78, 0xf, 0x0, 0x0, 0x0, 0x0, 0x564c9209a9a0, ...)
    	/build/snapd/parts/snapd-deb/build/client/client.go:492 +0xf6
    github.com/snapcore/snapd/client.(*Client).SysInfo(0xc00036c1c0, 0x0, 0x564c92236820, 0xc0004338b0)
    	/build/snapd/parts/snapd-deb/build/client/client.go:727 +0xd4
    main.maybeWaitForSecurityProfileRegeneration(0xc00036c1c0, 0xc0003a97c0, 0xd)
    	/build/snapd/parts/snapd-deb/build/cmd/snap/cmd_run.go:200 +0x1aa
    main.(*cmdRun).Execute(0xc00023feb8, 0xc000032190, 0x2, 0x3, 0x0, 0x0)
    	/build/snapd/parts/snapd-deb/build/cmd/snap/cmd_run.go:240 +0x172
    main.main()
    	/build/snapd/parts/snapd-deb/build/cmd/snap/main.go:482 +0x581
    
    goroutine 6 [syscall]:
    os/signal.signal_recv(0x0)
    	/usr/lib/go-1.13/src/runtime/sigqueue.go:147 +0x9e
    os/signal.loop()
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:23 +0x24
    created by os/signal.init.0
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:29 +0x43
    
    rax    0x0
    rbx    0x7fea15a8f840
    rcx    0x7fea156e1f47
    rdx    0x0
    rdi    0x2
    rsi    0x7fea12c8f820
    rbp    0x564c91c6ae7c
    rsp    0x7fea12c8f820
    r8     0x0
    r9     0x7fea12c8f820
    r10    0x8
    r11    0x246
    r12    0x7fea0c000c50
    r13    0x0
    r14    0x564c91c50d10
    r15    0x0
    rip    0x7fea156e1f47
    rflags 0x246
    cs     0x33
    fs     0x0
    gs     0x0
