apiVersion: waas.radware.com/v1beta1
kind: Profile
metadata:
  name:  waas-api-profile
  namespace: kwaf
  labels:
    release: waas
spec:
  policies:
  - classifiers:
    system_key.go:147: cannot determine seccomp compiler version in generateSystemKey: fork/exec /snap/snapd/15534/usr/lib/snapd/snap-seccomp: resource temporarily unavailable
    internal error, please report: running "yq" failed: timeout waiting for snap system profiles to get updated
    name: apiPolicy
    operatorEmail: support@radware.com
    protections:
    The connection to the server 10.100.0.139:6443 was refused - did you specify the right host or port?
    system_key.go:147: cannot determine seccomp compiler version in generateSystemKey: fork/exec /snap/snapd/15534/usr/lib/snapd/snap-seccomp: resource temporarily unavailable
    runtime/cgo: pthread_create failed: Resource temporarily unavailable
    SIGABRT: abort
    PC=0x7fb964049f47 m=5 sigcode=18446744073709551610
    
    goroutine 0 [idle]:
    runtime: unknown pc 0x7fb964049f47
    stack: frame={sp:0x7fb953ffe870, fp:0x0} stack=[0x7fb9537ff288,0x7fb953ffee88)
    00007fb953ffe770:  000055e470cf4ee0  000055e47084c9b0 
    00007fb953ffe780:  00007fb953ffe850  000055e46f88b9b6 <runtime.adjustframe+134> 
    00007fb953ffe790:  00007fb953ffead0  000055e470cd0148 
    00007fb953ffe7a0:  00007fb953ffec80  00007fb944000c50 
    00007fb953ffe7b0:  0000000000000000  000055e4701acd10 
    00007fb953ffe7c0:  0000000000000000  00007fb96462af13 
    00007fb953ffe7d0:  0000000000000005  0000000000000000 
    00007fb953ffe7e0:  2525252525252525  2525252525252525 
    00007fb953ffe7f0:  00000000000000ff  0000000000000000 
    00007fb953ffe800:  00000000000000ff  0000000000000000 
    00007fb953ffe810:  000000000000ff00  0000000000000000 
    00007fb953ffe820:  000055e46fa9349a <net.unixSocket+314>  000055e4707ab300 
    00007fb953ffe830:  0000000000000000  000055e47079dcc0 
    00007fb953ffe840:  000000c000409140  000000c000409150 
    00007fb953ffe850:  000055e46f87c228 <runtime.goexit1+56>  000055e47077b4d8 
    00007fb953ffe860:  20636f6c6c616d00  203a64656c696166 
    00007fb953ffe870: <0000000000000000  0000000000000000 
    00007fb953ffe880:  000000c0003b57c0  000000c000425810 
    00007fb953ffe890:  0000000000000000  0000000000000000 
    00007fb953ffe8a0:  0000000000000000  0000000000000000 
    00007fb953ffe8b0:  000000c00044f408  000000c00044f4f8 
    00007fb953ffe8c0:  000000c00044f5e8  000000c00044f6d8 
    00007fb953ffe8d0:  000000c00044f7c8  000000c00044f8b8 
    00007fb953ffe8e0:  0000000000000000  0000000000000000 
    00007fb953ffe8f0:  fffffffe7fffffff  ffffffffffffffff 
    00007fb953ffe900:  ffffffffffffffff  ffffffffffffffff 
    00007fb953ffe910:  ffffffffffffffff  ffffffffffffffff 
    00007fb953ffe920:  ffffffffffffffff  ffffffffffffffff 
    00007fb953ffe930:  ffffffffffffffff  ffffffffffffffff 
    00007fb953ffe940:  ffffffffffffffff  ffffffffffffffff 
    00007fb953ffe950:  ffffffffffffffff  ffffffffffffffff 
    00007fb953ffe960:  ffffffffffffffff  ffffffffffffffff 
    runtime: unknown pc 0x7fb964049f47
    stack: frame={sp:0x7fb953ffe870, fp:0x0} stack=[0x7fb9537ff288,0x7fb953ffee88)
    00007fb953ffe770:  000055e470cf4ee0  000055e47084c9b0 
    00007fb953ffe780:  00007fb953ffe850  000055e46f88b9b6 <runtime.adjustframe+134> 
    00007fb953ffe790:  00007fb953ffead0  000055e470cd0148 
    00007fb953ffe7a0:  00007fb953ffec80  00007fb944000c50 
    00007fb953ffe7b0:  0000000000000000  000055e4701acd10 
    00007fb953ffe7c0:  0000000000000000  00007fb96462af13 
    00007fb953ffe7d0:  0000000000000005  0000000000000000 
    00007fb953ffe7e0:  2525252525252525  2525252525252525 
    00007fb953ffe7f0:  00000000000000ff  0000000000000000 
    00007fb953ffe800:  00000000000000ff  0000000000000000 
    00007fb953ffe810:  000000000000ff00  0000000000000000 
    00007fb953ffe820:  000055e46fa9349a <net.unixSocket+314>  000055e4707ab300 
    00007fb953ffe830:  0000000000000000  000055e47079dcc0 
    00007fb953ffe840:  000000c000409140  000000c000409150 
    00007fb953ffe850:  000055e46f87c228 <runtime.goexit1+56>  000055e47077b4d8 
    00007fb953ffe860:  20636f6c6c616d00  203a64656c696166 
    00007fb953ffe870: <0000000000000000  0000000000000000 
    00007fb953ffe880:  000000c0003b57c0  000000c000425810 
    00007fb953ffe890:  0000000000000000  0000000000000000 
    00007fb953ffe8a0:  0000000000000000  0000000000000000 
    00007fb953ffe8b0:  000000c00044f408  000000c00044f4f8 
    00007fb953ffe8c0:  000000c00044f5e8  000000c00044f6d8 
    00007fb953ffe8d0:  000000c00044f7c8  000000c00044f8b8 
    00007fb953ffe8e0:  0000000000000000  0000000000000000 
    00007fb953ffe8f0:  fffffffe7fffffff  ffffffffffffffff 
    00007fb953ffe900:  ffffffffffffffff  ffffffffffffffff 
    00007fb953ffe910:  ffffffffffffffff  ffffffffffffffff 
    00007fb953ffe920:  ffffffffffffffff  ffffffffffffffff 
    00007fb953ffe930:  ffffffffffffffff  ffffffffffffffff 
    00007fb953ffe940:  ffffffffffffffff  ffffffffffffffff 
    00007fb953ffe950:  ffffffffffffffff  ffffffffffffffff 
    00007fb953ffe960:  ffffffffffffffff  ffffffffffffffff 
    
    goroutine 5 [syscall]:
    runtime.notetsleepg(0x55e470d2e580, 0xed70b3b, 0x0)
    	/usr/lib/go-1.13/src/runtime/lock_futex.go:227 +0x38 fp=0xc00005af60 sp=0xc00005af30 pc=0x55e46f850d18
    runtime.timerproc(0x55e470d2e560)
    	/usr/lib/go-1.13/src/runtime/time.go:311 +0x2f5 fp=0xc00005afd8 sp=0xc00005af60 pc=0x55e46f892765
    runtime.goexit()
    	/usr/lib/go-1.13/src/runtime/asm_amd64.s:1357 +0x1 fp=0xc00005afe0 sp=0xc00005afd8 pc=0x55e46f8a1c21
    created by runtime.(*timersBucket).addtimerLocked
    	/usr/lib/go-1.13/src/runtime/time.go:169 +0x110
    
    goroutine 1 [select]:
    github.com/snapcore/snapd/client.(*Client).do(0xc0003861c0, 0x55e470000ee7, 0x3, 0x55e47000ad78, 0xf, 0x0, 0x0, 0x0, 0x0, 0x55e47065af40, ...)
    	/build/snapd/parts/snapd-deb/build/client/client.go:394 +0x2f9
    github.com/snapcore/snapd/client.(*Client).doSyncWithOpts(0xc0003861c0, 0x55e470000ee7, 0x3, 0x55e47000ad78, 0xf, 0x0, 0x0, 0x0, 0x0, 0x55e4705f69a0, ...)
    	/build/snapd/parts/snapd-deb/build/client/client.go:492 +0xf6
    github.com/snapcore/snapd/client.(*Client).SysInfo(0xc0003861c0, 0x0, 0x55e470792820, 0xc00049e0e0)
    	/build/snapd/parts/snapd-deb/build/client/client.go:727 +0xd4
    main.maybeWaitForSecurityProfileRegeneration(0xc0003861c0, 0xc0003b57c0, 0xd)
    	/build/snapd/parts/snapd-deb/build/cmd/snap/cmd_run.go:200 +0x1aa
    main.(*cmdRun).Execute(0xc000251eb8, 0xc0000a8160, 0x2, 0x3, 0x0, 0x0)
    	/build/snapd/parts/snapd-deb/build/cmd/snap/cmd_run.go:240 +0x172
    main.main()
    	/build/snapd/parts/snapd-deb/build/cmd/snap/main.go:482 +0x581
    
    goroutine 19 [syscall]:
    os/signal.signal_recv(0x0)
    	/usr/lib/go-1.13/src/runtime/sigqueue.go:147 +0x9e
    os/signal.loop()
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:23 +0x24
    created by os/signal.init.0
    	/usr/lib/go-1.13/src/os/signal/signal_unix.go:29 +0x43
    
    rax    0x0
    rbx    0x7fb9643f7840
    rcx    0x7fb964049f47
    rdx    0x0
    rdi    0x2
    rsi    0x7fb953ffe870
    rbp    0x55e4701c6e7c
    rsp    0x7fb953ffe870
    r8     0x0
    r9     0x7fb953ffe870
    r10    0x8
    r11    0x246
    r12    0x7fb944000c50
    r13    0x0
    r14    0x55e4701acd10
    r15    0x0
    rip    0x7fb964049f47
    rflags 0x246
    cs     0x33
    fs     0x0
    gs     0x0
